<!DOCTYPE html>
<html>
<head>
	<title>Squomp</title>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script>
		$(document).ready(function(){

			function getOAuthCookie() {
				var cookies = (document.cookie).split(';');
				for (let c of cookies) {
					let pair = c.split('=');
					let name = pair[0].trim();
					let value = pair[1].trim();
					if (name == "oauthkeys") {
						// console.log("PRE:", value);
						value = value.substr(4); // random j: at the beginning of it? Dunno.
						value = decodeURIComponent(value);
						// console.log("VAL:", value);
						value = JSON.parse(value);
						// console.log(name, value);
						return value;
					}
				}
				// console.log("Cookies:", cookies);
			}

			$('#sign-in').on('click',function(ev){
				window.location = "/login"
			});

			/**
			 * Gets the details for a person
			 * @param uid the person's id (or self, if for user)
			 * @param token
			 * @returns {Promise}
			 */
			function getPersonDetails(uid,token){
				return new Promise(function(resolve,reject){
					$.ajax("https://api.foursquare.com/v2/users/" + uid + "?oauth_token="+token+"&v=20170215",{
						success: function(data, status){
							console.log("UserDeets:",data);
							resolve(data.response.user);
						},
						error: function(a,b,c){
							reject({a:a,b:b,c:c});
						}
					});
				});
			}

			function getIds(){
				return new Promise(function(resolve,reject){
					$.ajax("../saves",{
						method: "GET",
						success: function(data){
							resolve(data);
						},
						error: function(err){
							reject(err);
						}
					});

				});
			}

		});
	</script>
	<style>
		.rounded{
			border-radius: 15px;
		}
		.blue{
			background-color: darkcyan;
			color: white;
		}
		.spaced{
			margin: 15px;
			padding: 15px;
		}
		.dark{
			background-color: #202020;
		}
	</style>
</head>
<body class="dark">
	<div align="center">
		<div class="rounded blue" style="padding:15px; margin: 15px;">
			<h1 align="center">SQUOMP</h1>
			<h4 align="center"><i>A website with absolutely no purpose</i></h4>
		</div>

		<button type="button" class="btn btn-primary blue" align="center" id="sign-in">
			<h1 style="display: inline;">Sign in with Foursquare</h1>
		</button>

		<div class="rounded blue spaced" id="friends">
			<h2>Friends</h2>
			<hr>
		</div>
	</div>

</body>
</html>
